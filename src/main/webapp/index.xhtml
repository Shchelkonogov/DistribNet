<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<h:head>
    <title>Тест</title>
    <h:outputStylesheet name="style.css" library="css"/>
    <style type="text/css">#{graph.styles}</style>
</h:head>
<h:body>
    <table class="table-style" cellspacing="0" cellpadding="0">
        <tr>
            <td valign="top" style="width: 48.1em; min-width: 48.1em">
                <p:diagram id="diaLeft"
                           value="#{graph.diagramModelLeft}"
                           style="min-height: 400px; height: calc(100% - 45px); overflow: hidden;"
                           var="el">
                    <f:facet name="element">
                        <h:outputText value="#{el.name}" style="display: block; margin-top: -1em;"/>
                        <p:repeat value="#{el.values}" var="value" varStatus="status">
                            <h:outputText styleClass="#{el.className}#{el.size} textLeftGraph#{status.index}"
                                          value="#{value}"
                                          style="position: absolute;"/>
                        </p:repeat>
                    </f:facet>
                </p:diagram>

                <p:repeat value="#{graph.producerIndex}" var="el" varStatus="status">
                    <div class="ui-widget #{el.color} init#{status.index}">
                        #{el.value}
                    </div>
                </p:repeat>

                <div style="position: absolute; top: 48px; left: 358px; transform: translate(-50%, 0px); background: #{graph.temperatureColor}"
                     class="ui-widget">
                    #{graph.temperature}
                </div>

                <p:selectBooleanButton styleClass="boolean-button-bar"
                                       value="#{graph.co}"
                                       onLabel="ЦО" offLabel="ЦО"
                                       onIcon="pi pi-check" offIcon="pi pi-times">
                    <p:ajax listener="#{graph.changeButton}"/>
                </p:selectBooleanButton>
                <p:selectBooleanButton styleClass="boolean-button-bar"
                                       value="#{graph.gvs}"
                                       onLabel="ГВС" offLabel="ГВС"
                                       onIcon="pi pi-check" offIcon="pi pi-times">
                    <p:ajax listener="#{graph.changeButton}"/>
                </p:selectBooleanButton>
                <p:selectBooleanButton styleClass="boolean-button-bar"
                                       value="#{graph.vent}"
                                       onLabel="Вент" offLabel="Вент"
                                       onIcon="pi pi-check" offIcon="pi pi-times">
                    <p:ajax listener="#{graph.changeButton}"/>
                </p:selectBooleanButton>
            </td>
            <td valign="top" style="min-width: 35em">
                <p:diagram id="diaRight"
                           value="#{graph.diagramModelRight}"
                           style="min-height: 500px; height: 100%"
                           var="el">
                    <f:facet name="element">
                        <h:outputText value="#{el.name}" style="display: block; margin-top: -1em;"/>
                        <p:repeat value="#{el.values}" var="value" varStatus="status">
                            <h:outputText styleClass="#{el.className}#{el.size} textRightGraph#{status.index}"
                                          value="#{value}"
                                          style="position: absolute;"/>
                        </p:repeat>
                    </f:facet>
                </p:diagram>
            </td>
        </tr>
    </table>

    <p:repeat value="#{graph.tooltips}" var="tooltip">
        <pe:tooltip for="@(##{tooltip.id})" value="#{tooltip.value}"
                    mouseTracking="true" myPosition="top left" adjustX="10" adjustY="10"
                    styleClass="qtip qtip-dark qtip-rounded qtip-shadow"/>
    </p:repeat>

    <div style="position: absolute; top: 20px; left: 50%">
        #{graph.error}
    </div>
</h:body>
</html>
